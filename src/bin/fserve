#!/bin/bash

WORK_DIR='~/Dev/Forsta/forsta-api'
shellexec ()
{
    # WINTITLE="\033]2;${1}\007"
    # WINTITLE="\033]30;${1}\007"
    tmpfile=$(mktemp)
    echo -e "set +e\ntrap 'echo \"Dead now!\"' SIGINT SIGTERM\n$1; zsh" > "$tmpfile"
    cat "$tmpfile"
    konsole --show-tabbar -p tabtitle="$1" --profile red --workdir $WORK_DIR -e "bash --rcfile $tmpfile" &
    sleep 1
}

i3-msg 'workspace 7; append_layout ~/.i3/timehook-ws-layout-7.json'

shellexec "npm run mongo"
# shellexec "npm run livequery"
shellexec "npm run dashboard"

shellexec "npm start"
WORK_DIR='~/Dev/Forsta/nikex'

shellexec "npm start"
