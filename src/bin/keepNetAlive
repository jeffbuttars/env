#!/bin/bash

while [[ true ]]; do
    LINK_STATE=$(ip link show wlp3s0 | awk '{print $9}')

    if [[ "$LINK_STATE" != "UP" ]]; then
        echo "Network looks down, restarting Network Manager..."
        sudo systemctl restart NetworkManager
        sleep 3
        sudo systemctl status NetworkManager
    fi

    sleep 5
done
