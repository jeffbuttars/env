#!/bin/bash

CLEAR='false'

if [[ $1 == '-c' ]]; then
    shift
    CLEAR='true'
fi

SLEEP_TIME=3
args=$@

if [[ -z $args ]]; then
    "No args given to exec"
    exit 1
fi

eval $args

echo "Running command '$args' on modify"
while inotifywait -e modify -r ./
do
    if [[ $CLEAR == 'true' ]]; then
        printf '\033c'
    fi

    echo "running $args"
    sleep $SLEEP_TIME
    eval $args
done
